import { el, qs } from '../utils/dom.js';import { getState, setState, subscribe } from '../state.js';import { getRole } from '../permissions.js';export const Settings=(mount)=>{ const s=getState(); const section=el('section',{className:'main-card'},[ el('h2',{},['Ajustes']), el('p',{className:'text-muted'},['Rol actual: ', getRole() || 'â€”']), el('label',{className:'label mt-2'},['Tu nombre (local)']), el('input',{id:'txtName',value:s.profileName||'',placeholder:'Escribe tu nombre',className:'input'}), el('button',{id:'btnSave',className:'btn btn--primary mt-2'},['Guardar nombre']), el('div',{className:'mt-3'},[ el('label',{className:'label'},['Tema: ']), el('select',{id:'selTheme',className:'input',style:'max-width:200px'},[ el('option',{value:'light',selected:s.theme==='light'},['Claro']), el('option',{value:'dark', selected:s.theme==='dark' },['Oscuro']) ]) ]) ]); qs('#btnSave',section).addEventListener('click',()=>{ const name=qs('#txtName',section).value.trim(); setState({profileName:name}); alert('Nombre guardado.'); }); qs('#selTheme',section).addEventListener('change',(e)=> setState({theme:e.target.value})); const apply=(t)=> document.documentElement.setAttribute('data-theme',t); apply(s.theme); const unsub=subscribe('theme',apply); mount.replaceChildren(section); return ()=>unsub(); };